<!doctype html>
<html>
<head><meta charset="utf-8"><title>Login</title></head>
<body>
  <div style="max-width:480px;margin:40px auto;font-family:Arial">
    <h2>Login (by Mobile)</h2>
    <input id="mobile" placeholder="Mobile"><br><br>
    <button onclick="login()">Login</button>
    <div id="out"></div>
  </div>

<script>
const API_BASE = "http://192.168.129.171:5000";
async function login(){
  const mobile = document.getElementById('mobile').value.trim();
  if(!mobile){alert("Enter mobile");return;}
  try{
    const res = await fetch(API_BASE + "/login", {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body: JSON.stringify({mobile})
    });
    const data = await res.json();
    if(res.ok && data.status==="success"){
      // store to localStorage and redirect to dashboard
      localStorage.setItem("user", JSON.stringify(data));
      window.location = "dashboard.html";
    } else {
      document.getElementById('out').innerText = data.msg || JSON.stringify(data);
    }
  }catch(e){
    alert("Cannot connect to server");
    console.error(e);
  }
}
</script>
</body>
</html>
