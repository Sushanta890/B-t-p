<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Register</title>
  <style>
    body{background:linear-gradient(135deg,#00c6ff,#0072ff);font-family:Arial;color:#111;padding:20px}
    .card{max-width:520px;margin:20px auto;background:#fff;padding:28px;border-radius:12px;box-shadow:0 6px 22px rgba(0,0,0,.12)}
    input{width:100%;padding:12px;margin:8px 0;border-radius:8px;border:1px solid #333}
    button{width:100%;padding:12px;background:#000;color:#fff;border-radius:8px;border:none}
    #msg{margin-top:12px}
  </style>
</head>
<body>
  <div class="card">
    <h2>Registration</h2>
    <input id="first" placeholder="First name">
    <input id="last" placeholder="Last name">
    <input id="mobile" placeholder="Mobile number">
    <input id="email" placeholder="Email">
    <input id="password" type="password" placeholder="Password">
    <input id="repassword" type="password" placeholder="Re-enter password">
    <button onclick="register()">Register</button>
    <div id="msg"></div>
  </div>

<script>
const API_BASE = "http://192.168.129.171:5000"; // <- CHANGE IF YOUR IP CHANGES

async function register(){
  const first = document.getElementById('first').value.trim();
  const last  = document.getElementById('last').value.trim();
  const mobile= document.getElementById('mobile').value.trim();
  const email = document.getElementById('email').value.trim();
  const pass  = document.getElementById('password').value;
  const rep   = document.getElementById('repassword').value;

  if(!first||!last||!mobile||!email||!pass){ alert("Fill all fields"); return; }
  if(pass !== rep){ alert("Passwords do not match"); return; }

  try{
    const res = await fetch(API_BASE + "/register", {
      method: "POST",
      headers: {"Content-Type":"application/json"},
      body: JSON.stringify({first,last,mobile,email,password:pass})
    });
    const data = await res.json();
    if(res.ok && data.status === "success"){
      document.getElementById('msg').innerHTML = `<b>Account:</b> ${data.account_number} <br> <b>Customer ID:</b> ${data.customer_id}`;
    } else {
      document.getElementById('msg').innerText = data.msg || JSON.stringify(data);
    }
  }catch(err){
    alert("Error: Cannot connect to server. Make sure API is running and API_BASE uses your phone IP.");
    console.error(err);
  }
}
</script>
</body>
</html>
