<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bank Manager Deposit</title>
<style>
  :root{--bg:#0b0b0b;--gold:#f0c24b;--glass:rgba(255,255,255,.06)}
  *{box-sizing:border-box;font-family:Inter,system-ui,Arial}
  body{
    margin:0;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;
    background:linear-gradient(135deg,#050506,#141416 70%);
    color:#fff;
  }
  .bg{position:fixed;inset:0;opacity:.04;background-image:url('https://cryptologos.cc/logos/bitcoin-btc-logo.png');
    background-repeat:repeat;background-size:120px;animation:move 25s linear infinite}
  @keyframes move{from{background-position:0 0}to{background-position:1500px 1500px}}
  .card{
    width:360px;padding:24px;border-radius:14px;background:var(--glass);
    box-shadow:0 6px 30px rgba(0,0,0,.7);backdrop-filter:blur(6px);margin-bottom:20px;
  }
  h2{color:var(--gold);margin:0 0 14px;text-align:center}
  input,button{
    width:100%;padding:10px;margin:8px 0;border-radius:8px;border:0;
    background:rgba(255,255,255,.06);color:#fff;text-align:center;
  }
  button{
    background:var(--gold);color:#000;font-weight:700;cursor:pointer;transition:.3s;
  }
  button:hover{transform:scale(1.05)}
  .msg{height:18px;text-align:center;font-size:14px;margin-top:6px}
  .history{
    width:360px;max-height:250px;overflow-y:auto;
    background:rgba(255,255,255,.05);padding:12px;border-radius:10px;
  }
  .entry{
    border-bottom:1px dashed rgba(255,255,255,.15);
    padding:8px 0;font-size:14px;
  }
  .time{color:#aaa;font-size:12px;}
</style>
</head>
<body>
<div class="bg"></div>

<div class="card">
  <h2>üí∞ Deposit to Bank Manager</h2>
  <input id="acc" placeholder="Enter Bank Manager Account No.">
  <input id="amt" placeholder="Enter Amount" type="number">
  <button id="btnDeposit">Deposit</button>
  <div class="msg" id="msg"></div>
</div>

<div class="history" id="historyBox">
  <h3 style="text-align:center;color:#f0c24b;margin-top:0;">Transaction History</h3>
  <div id="records"></div>
</div>

<script>
/* --- storage helpers --- */
function loadUsers(){ try{return JSON.parse(localStorage.getItem('btc_users')||'[]')}catch(e){return[]} }
function saveUsers(u){ localStorage.setItem('btc_users', JSON.stringify(u)) }

function loadHistory(){ try{return JSON.parse(localStorage.getItem('btc_deposit_history')||'[]')}catch(e){return[]} }
function saveHistory(h){ localStorage.setItem('btc_deposit_history', JSON.stringify(h)) }

/* --- handle deposit --- */
document.getElementById('btnDeposit').addEventListener('click',()=>{
  const acc=document.getElementById('acc').value.trim();
  const amt=parseFloat(document.getElementById('amt').value);
  const msg=document.getElementById('msg');

  if(!acc||isNaN(amt)||amt<=0){
    msg.style.color='salmon'; msg.textContent='‚ö†Ô∏è Enter valid details';
    return;
  }

  const users=loadUsers();
  const manager=users.find(u=>u.accountNo===acc && u.role==='BankManager');

  if(!manager){
    msg.style.color='salmon';
    msg.textContent='‚ùå Bank Manager account not found';
    return;
  }

  // update balance
  manager.balance = (manager.balance||0) + amt;
  saveUsers(users);

  // record transaction
  const hist = loadHistory();
  const now = new Date();
  hist.unshift({
    accNo: manager.accountNo,
    name: manager.fname + ' ' + manager.lname,
    amount: amt,
    time: now.toLocaleString()
  });
  saveHistory(hist);

  msg.style.color='#b9f6c1';
  msg.textContent=`‚úÖ ‚Çπ${amt.toLocaleString('en-IN')} added successfully`;
  document.getElementById('acc').value='';
  document.getElementById('amt').value='';
  renderHistory();
});

/* --- show transaction history --- */
function renderHistory(){
  const recs=loadHistory();
  const div=document.getElementById('records');
  div.innerHTML='';
  if(recs.length===0){div.innerHTML='<p style="text-align:center;color:#aaa;">No transactions yet</p>';return;}
  recs.forEach(r=>{
    const e=document.createElement('div');
    e.className='entry';
    e.innerHTML=`<b>‚Çπ${r.amount.toLocaleString('en-IN')}</b> added to <b>${r.name}</b> (${r.accNo})<br><span class="time">${r.time}</span>`;
    div.appendChild(e);
  });
}

renderHistory();
</script>
</body>
</html>
